# EXPERIMENT CONFIGURATION - Full parameter sweep experiments
#
# This configuration allows you to set prompts in the YAML file.
# The prompts' keys are abbreviations that can be used for naming files,
# and their values are the actual prompts for text-to-3D generation.
#
# USAGE:
# sbatch scripts/run_ours_exp.sh exp_repulsion_lambda_sweep

# TODO: λ_repulsion 1D coarse → fine 탐색 → 그다음 β(temperature) 단일 축 튜닝 → 마지막에 국소 2D(λ×β) 미세탐색.

# Experiment 0: Baseline (wo)
# baseline (to compare with ours), which has same configuration with ours
# ------------------------------------------------------------ #
# Main Experiments #
# ------------------------------------------------------------ #
# Experiment: baseline (to compare with ours), which has best results
exp0_baseline: # same noise: diversity minimization and same with ours
  name: exp0_baseline
  method: grid
  sweep_parameters:
    repulsion_type: ['wo']
    prompt: 
      # hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      bulldozer: "a bulldozer made out of toy bricks"
    
    # seed: [42]
    seed: [42, 123, 456, 789]

  # fixed parameters
  fixed_parameters:

    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30
    
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True
    
    num_particles: 8
    invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003 # ⭐️

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training

    save_model: True
    video_snapshot: True

    save_features: True
    save_features_interval: 250


# Experiment 1: repulsion type x kernel type sweep --> rlsd, rbf is best...
exp1_repulsion_kernel: 
  name: exp1_repulsion_kernel
  method: grid
  sweep_parameters:
    prompt: 
      # hamburger: "a photo of a hamburger"
      cactus: "a small saguaro cactus planted in a clay pot"
      icecream: "a photo of an ice cream"
      tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      bulldozer: "a bulldozer made out of toy bricks"
      
    repulsion_type: ['rlsd', 'svgd']
    kernel_type: ['cosine', 'rbf']

    seed : [42, 123]
    # seed: [42, 123, 456, 789]

  # fixed parameters
  fixed_parameters:
    lambda_repulsion: 1000

    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30
    
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True
  
    feature_layer: 'last' # 2: early, 5: mid, 11: last -> 11

    rbf_beta: 1.5
    cosine_beta: 0.5
    cosine_eps_shift: 1e-3

    use_cosine_decay: False

    # rep_cosine_warmup: 0.2
    num_particles: 8
    # invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training

    save_model: False
    video_snapshot: False

    save_features: True
    save_features_interval: 250

# Experiment 2: lambda (λ) sweep (rlsd, rbf fixed) --> 시각적으로 안정적 1000 정도
exp2_lambda_coarse: 
  name: exp2_lambda_coarse
  method: grid
  sweep_parameters:
    lambda_repulsion: [1, 10, 100, 1000, 10000]  # log scale
    prompt: 
      # hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      bulldozer: "a bulldozer made out of toy bricks"

    seed: [42]

  # fixed parameters
  fixed_parameters:
    repulsion_type: 'rlsd'
    kernel_type: 'rbf'

    # adaptive_lambda: False
    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30

    num_particles: 8
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True

    feature_layer: 'last' # 2: early, 5: mid, 11: last -> 11

    rbf_beta: 1.5
    # cosine_beta: 0.5
    # cosine_eps_shift: 1e-3

    use_cosine_decay: False
    # rep_cosine_warmup: 0.2

    invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training
    
    save_model: False
    video_snapshot: False

    save_features: True
    save_features_interval: 250


# Experiment 3: lambda (λ) sweep (rlsd, rbf fixed)
exp3_lambda_fine:
  name: exp3_lambda_fine
  method: grid
  sweep_parameters:
    lambda_repulsion: [600, 800, 1000, 1200, 1400] # 국소 탐색
    prompt: 
      # hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      bulldozer: "a bulldozer made out of toy bricks"

    seed: [42, 123]
    # seed: [42, 123, 456, 789]

  # fixed parameters
  fixed_parameters:
    repulsion_type: 'rlsd'
    kernel_type: 'rbf'

    # adaptive_lambda: False
    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30

    num_particles: 8
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True

    feature_layer: 'last' # 2: early, 5: mid, 11: last -> 11

    rbf_beta: 1.5
    # cosine_beta: 0.5
    # cosine_eps_shift: 1e-3

    use_cosine_decay: False
    # rep_cosine_warmup: 0.2

    invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5
    
    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training
    
    save_model: False
    video_snapshot: False

    save_features: True
    save_features_interval: 250


# Experiment 4: guidance scale sweep (rlsd, rbf fixed)
exp4_guidance_scale:
  name: exp4_guidance_scale
  method: grid
  sweep_parameters:
    guidance_scale: [30, 50, 70, 100]
    prompt: 
      # hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      bulldozer: "a bulldozer made out of toy bricks"

    seed: [42, 123]
    # seed: [42, 123, 456, 789]

  # fixed parameters
  fixed_parameters:
    lambda_repulsion: 1000
    repulsion_type: 'rlsd'
    kernel_type: 'rbf'

    iters: 1000
    schedule_iters: 1500

    num_particles: 8
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True

    feature_layer: 'last' # 2: early, 5: mid, 11: last -> 11

    rbf_beta: 1.5
    # cosine_beta: 0.5
    # cosine_eps_shift: 1e-3

    use_cosine_decay: False
    # rep_cosine_warmup: 0.2
    
    invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training

    save_model: False
    video_snapshot: False

    save_features: True
    save_features_interval: 250


# Experiment 5: rbf beta sweep
exp5_rbf_beta:
  name: exp5_rbf_beta
  method: grid
  sweep_parameters:
    rbf_beta: [0.5, 1.0, 1.5, 2.0]
    prompt: 
      # hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      bulldozer: "a bulldozer made out of toy bricks"

    seed: [42, 123]
    # seed: [42, 123, 456, 789]

  # fixed parameters
  fixed_parameters:
    repulsion_type: 'rlsd'
    kernel_type: 'rbf'

    lambda_repulsion: 1000
    
    iters: 1000
    schedule_iters: 1500

    guidance_scale: 30
    
    num_particles: 8
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True
    feature_layer: 'last' # 2: early, 5: mid, 11: last -> 11

    use_cosine_decay: False
    invert_bg_prob: 0.5

    
    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training

    save_model: False
    video_snapshot: False

    save_features: True
    save_features_interval: 250


# Experiment 6: ours best
exp6_ours_best: 
  name: exp6_ours_best
  method: grid
  sweep_parameters:
    prompt: 
      hamburger: "a photo of a hamburger"
      cactus: "a small saguaro cactus planted in a clay pot"
      icecream: "a photo of an ice cream"
      tulip: "a photo of a tulip"
      sundae: "an ice cream sundae"
      bulldozer: "a bulldozer made out of toy bricks"

    # seed: [42]
    seed: [42, 123, 456, 789]

  # fixed parameters
  fixed_parameters:

    repulsion_type: 'rlsd'
    kernel_type: 'rbf'

    lambda_repulsion: 1000

    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30
    
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True
  
    feature_layer: 'last' # 2: early, 5: mid, 11: last -> 11

    rbf_beta: 1.5
    # cosine_beta: 0.5
    # cosine_eps_shift: 1e-3

    use_cosine_decay: False

    # rep_cosine_warmup: 0.2
    num_particles: 8
    # invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003 # ⭐️

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training

    save_model: True
    video_snapshot: True

    save_features: True
    save_features_interval: 250


# ------------------------------------------------------------ #
# Appendix #
# ------------------------------------------------------------ #
# Experiment: feature layer sweep
exp_feature_layer:
  name: exp_feature_layer
  method: grid
  sweep_parameters:
    feature_layer: ['early', 'mid', 'last'] # 2: early, 5: mid, 11: last
    prompt: 
      # hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      bulldozer: "a bulldozer made out of toy bricks"

  # fixed parameters
  fixed_parameters:
    repulsion_type: 'rlsd'
    kernel_type: 'rbf'

    seed: 42

    lambda_repulsion: 1000

    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30

    num_particles: 8
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True

    rbf_beta: 1.5
    # cosine_beta: 1.0
    # cosine_eps_shift: 1e-3

    use_cosine_decay: False
    # rep_cosine_warmup: 0.2

    invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training
    
    save_model: False
    video_snapshot: False

    save_features: True
    save_features_interval: 250


# Experiment: num_particles sweep
exp_num_particles:
  name: exp_num_particles
  method: grid
  sweep_parameters:
    num_particles: [2, 4, 8]
    prompt: 
      # hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      bulldozer: "a bulldozer made out of toy bricks"

  # fixed parameters
  fixed_parameters:
    repulsion_type: 'rlsd'
    kernel_type: 'rbf'

    lambda_repulsion: 1000

    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30

    seed: 42
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True

    feature_layer: 'last' # 2: early, 5: mid, 11: last -> 11

    rbf_beta: 1.5
    # cosine_beta: 0.5
    # cosine_eps_shift: 1e-3

    use_cosine_decay: False
    # rep_cosine_warmup: 0.2

    invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training
    
    save_model: False
    video_snapshot: False

    save_features: True
    save_features_interval: 250


# ------------------------------------------------------------ #
# Plus #
# ------------------------------------------------------------ #

exp_gaussian_reproduce: 
  name: exp_gaussian_reproduce
  method: grid
  sweep_parameters:
    repulsion_type: ['wo']
    prompt: 
      hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      # bulldozer: "a bulldozer made out of toy bricks"

    seed: [42]
    # seed: [42, 123, 456, 789]

  # fixed parameters
  fixed_parameters:
    num_particles: 1

    iters: 500
    schedule_iters: 500
    guidance_scale: 100
    
    force_same_t: False
    force_same_noise: False
    anneal_timestep: True
    
    invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    opacity_reset_interval: 700 # default
    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_lr: 0.05

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training

    save_model: True
    video_snapshot: True

    save_features: True
    save_features_interval: 250


# 제외?
exp0_baseline_indep: # different noise: diversity maximization
  name: exp0_baseline_indep
  method: grid
  sweep_parameters:
    repulsion_type: ['wo']
    prompt: 
      hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      tulip: "a photo of a tulip"
      sundae: "an ice cream sundae"
      bulldozer: "a bulldozer made out of toy bricks"
    
    seed: [42]
    # seed: [42, 123, 456, 789]

  # fixed parameters
  fixed_parameters:

    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30
    
    force_same_t: True
    force_same_noise: False
    anneal_timestep: True
    
    num_particles: 8
    invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003 # ⭐️

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training

    save_model: True
    video_snapshot: True

    save_features: True
    save_features_interval: 250


# Experiment: num_pts sweep
exp_num_pts:
  name: exp_num_pts
  method: grid
  sweep_parameters:
    num_pts: [1000, 3000, 5000]
    prompt: 
      # hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      # tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      # bulldozer: "a bulldozer made out of toy bricks"

  # fixed parameters
  fixed_parameters:
    repulsion_type: 'rlsd'
    kernel_type: 'rbf'

    lambda_repulsion: 1000

    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30

    seed: 42
    num_particles: 8
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True

    feature_layer: 'last' # 2: early, 5: mid, 11: last -> 11

    rbf_beta: 1.5
    # cosine_beta: 0.5
    # cosine_eps_shift: 1e-3

    use_cosine_decay: False
    # rep_cosine_warmup: 0.2

    invert_bg_prob: 0.5

    eval_H: 512
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training
    
    save_model: False
    video_snapshot: False

    save_features: False
    # save_features_interval: 250


# Experiment: cosine decay sweep
exp_cosine_decay:
  name: exp_cosine_decay
  method: grid
  sweep_parameters:
    prompt: 
      # hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      # tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      # bulldozer: "a bulldozer made out of toy bricks"

    use_cosine_decay: [True, False]
    # cosine_decay_floor: [0.1, 0.3] 
    # rep_cosine_warmup: [0.0, 0.2]

  # fixed parameters
  fixed_parameters:

    # use_cosine_decay: True

    cosine_decay_floor: 0.3
    rep_cosine_warmup: 0.2

    repulsion_type: 'rlsd'
    kernel_type: 'rbf'

    # adaptive_lambda: False
    lambda_repulsion: 1000

    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30

    seed: 42
    num_particles: 8
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True

    feature_layer: 'last' # 2: early, 5: mid, 11: last -> 11

    rbf_beta: 1.5
    # cosine_beta: 0.5
    # cosine_eps_shift: 1e-3

    invert_bg_prob: 0.5

    eval_H: 512 
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default
    opacity_lr: 0.003

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training
    
    save_model: False
    video_snapshot: False


exp_opacity_lr:
  name: exp_opacity_lr
  method: grid
  sweep_parameters:
    # opacity_lr: [0.0001, 0.0005, 0.001, 0.005, 0.01, 0.05]
    opacity_lr: [0.001, 0.003, 0.005, 0.01, 0.05]
    prompt: 
      # hamburger: "a photo of a hamburger"
      icecream: "a photo of an ice cream"
      cactus: "a small saguaro cactus planted in a clay pot"
      # tulip: "a photo of a tulip"
      # sundae: "an ice cream sundae"
      # bulldozer: "a bulldozer made out of toy bricks"

  # fixed parameters
  fixed_parameters:
    repulsion_type: 'rlsd'
    kernel_type: 'rbf'
    lambda_repulsion: 1000
    # adaptive_lambda: False
    iters: 1000
    schedule_iters: 1500
    guidance_scale: 30

    seed: 42
    num_particles: 8
    force_same_t: True
    force_same_noise: True
    anneal_timestep: True

    feature_layer: 'last' # 2: early, 5: mid, 11: last -> 11

    rbf_beta: 1.5
    # cosine_beta: 0.5
    # cosine_eps_shift: 1e-3

    use_cosine_decay: False
    # rep_cosine_warmup: 0.2

    invert_bg_prob: 0.5

    eval_H: 512 
    eval_W: 512

    eval_radius: # not to crop the object adjust the radius
      hamburger: 3.0
      icecream: 4.0
      cactus: 4.0
      tulip: 4.0
      sundae: 4.0
      bulldozer: 4.5

    density_start_iter: 0
    density_end_iter: 3000
    densification_interval: 50
    densify_grad_threshold: 0.01

    opacity_reset_interval: 700 # default

  settings:
    # visualize
    visualize: True
    save_iid: False
    visualize_fixed_viewpoint: True
    visualize_fixed_viewpoint_interval: 100

    # metrics
    metrics: True
    quantitative_metrics_interval: 50
    num_views: 8

    # options
    losses_interval: 10
    efficiency_interval: 10 
    enable_lpips: False # disable lpips for faster training
    
    save_model: False
    video_snapshot: False

    save_features: False
    # save_features_interval: 250